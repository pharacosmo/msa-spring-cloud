#FROM ubuntu:latest
#LABEL authors="20259996"
#
#ENTRYPOINT ["top", "-b"]

#docker build -t gateway:latest ./gateway
#docker run -d --name gateway-container -p 8080:8080 gateway:latest

FROM openjdk:17-jdk-slim

WORKDIR /app

COPY build/libs/demo-0.0.1-SNAPSHOT.jar app.jar

EXPOSE 8082

ENTRYPOINT ["java", "-jar", "app.jar"]

## 1ï¸âƒ£ Build Stage: Gradleì„ ì‚¬ìš©í•˜ì—¬ JAR ë¹Œë“œ
#FROM gradle:8.10-jdk17 AS builder
#WORKDIR /app
#
## CA ì¸ì¦ì„œ ì—…ë°ì´íŠ¸
##RUN apt-get update && apt-get install -y ca-certificates && update-ca-certificates
#RUN apt-get update && apt-get install -y ca-certificates ca-certificates-java && update-ca-certificates -f
#
#
## Gradle Wrapper ë° í”„ë¡œì íŠ¸ íŒŒì¼ ë³µì‚¬
#COPY gradlew gradle settings.gradle.kts build.gradle.kts ./
#COPY gradle/wrapper ./gradle/wrapper
#
## Gradle ì‹¤í–‰ ê¶Œí•œ ì„¤ì • (Linux ëŒ€ë¹„)
#RUN chmod +x gradlew || true
#
## Gradle ì˜ì¡´ì„± ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œ (ìºì‹œ í™œìš©)
#RUN ./gradlew dependencies --no-daemon || true
#
## ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬ ë° ë¹Œë“œ
#COPY src ./src
#
## ğŸ”¥ JAR íŒŒì¼ì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë””ë²„ê¹… ì½”ë“œ ì¶”ê°€
##RUN ./gradlew bootJar --no-daemon && ls -l build/libs/
#RUN gradle bootJar --no-daemon && ls -l build/libs/
#
## 2ï¸âƒ£ Runtime Stage: OpenJDK ê¸°ë°˜ìœ¼ë¡œ JAR ì‹¤í–‰
#FROM openjdk:17-jdk-slim
#WORKDIR /app
#COPY --from=builder /app/build/libs/*.jar app.jar
#EXPOSE 8080
#ENTRYPOINT ["java", "-jar", "app.jar"]



